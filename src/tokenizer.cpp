#include "tokenizer.h"
#include <iostream>

// Generated by flex.
int custom_yylex(std::list<token> &);

void tokenizer::scan(){
    if(tokenlist.size() >= 1){
        lookahead.push_back( tokenlist.front() );
        tokenlist.pop_front();
    }else{
        // No more tokens avaliable!
        lookahead.push_back(tkn_EOF);
    }
}

void tokenizer::prepare(){

    custom_yylex(tokenlist);

    // Print list of tokens for debugging purposes.
    for(token &tkn : tokenlist){
        std::cout << tkn << " ";
    }
    std::cout << std::endl;
}

void tokenizer::syntaxerror(){
    // I have no idea when exactly doest this get called.
    std::cout << "syntaxerror!\n";
    std::cout << "Lookahead during error:" << std::endl;
    for(token &tkn : lookahead){
        std::cout << tkn << " ";
    }
    std::cout << std::endl;
}
